{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tomas\\\\Documents\\\\F22\\\\Radio\\\\intern_project\\\\client\\\\src\\\\ProfilePage.js\";\nimport \"./ProfilePage.css\";\nimport React from \"react\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\nimport { getToken } from \"./spotify.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ProfilePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      spotify: new SpotifyWebApi(),\n      authenticated: false,\n      displayName: \"\",\n      topArtists: []\n    };\n  }\n  componentDidMount() {\n    const token = getToken();\n    this.state.spotify.setAccessToken(token);\n\n    // There are multiple ways to fetch data from a user's Spotify profile\n    // This is one such way, see below for more documentation\n    // https://github.com/thelinmichael/spotify-web-api-node\n\n    this.state.spotify.getMe().then(me => this.setState({\n      displayName: me.display_name\n    }), error => console.log(\"Error loading profile data: \", error));\n    this.state.spotify.getMyTopArtists({\n      limit: 10\n    }).then(artistsData => {\n      let artists = [];\n      artistsData.items.forEach(artist => artists.push(artist.name));\n      this.setState({\n        topArtists: artists,\n        authenticated: true\n      });\n    }, error => console.log(\"Error loading top artists: \", error));\n  }\n  render() {\n    // If the user isn't fully authenticated, don't render anything yet\n    // This shouldn't be the case for longer than a fraction of a second\n    if (!this.state.authenticated) return null;\n\n    // Log out by navigating back to the home page\n    const logout = () => this.props.navigate(\"/\");\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Logged in as \", this.state.displayName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default ProfilePage;","map":{"version":3,"names":["React","SpotifyWebApi","getToken","ProfilePage","Component","constructor","props","state","spotify","authenticated","displayName","topArtists","componentDidMount","token","setAccessToken","getMe","then","me","setState","display_name","error","console","log","getMyTopArtists","limit","artistsData","artists","items","forEach","artist","push","name","render","logout","navigate"],"sources":["C:/Users/tomas/Documents/F22/Radio/intern_project/client/src/ProfilePage.js"],"sourcesContent":["import \"./ProfilePage.css\";\r\nimport React from \"react\";\r\nimport SpotifyWebApi from \"spotify-web-api-js\";\r\nimport { getToken } from \"./spotify.js\";\r\n\r\nclass ProfilePage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            spotify: new SpotifyWebApi(),\r\n            authenticated: false,\r\n            displayName: \"\",\r\n            topArtists: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const token = getToken();\r\n        this.state.spotify.setAccessToken(token);\r\n\r\n        // There are multiple ways to fetch data from a user's Spotify profile\r\n        // This is one such way, see below for more documentation\r\n        // https://github.com/thelinmichael/spotify-web-api-node\r\n\r\n        this.state.spotify.getMe().then(me => this.setState({displayName: me.display_name}), \r\n            error => console.log(\"Error loading profile data: \", error));\r\n\r\n        this.state.spotify.getMyTopArtists({\r\n            limit: 10\r\n        }).then(artistsData => {\r\n            let artists = [];\r\n            artistsData.items.forEach(artist => artists.push(artist.name));\r\n            \r\n            this.setState({\r\n                topArtists: artists,\r\n                authenticated: true\r\n            });\r\n        }, error => console.log(\"Error loading top artists: \", error));\r\n    }\r\n\r\n    render() {\r\n        // If the user isn't fully authenticated, don't render anything yet\r\n        // This shouldn't be the case for longer than a fraction of a second\r\n        if (!this.state.authenticated) return null;\r\n\r\n        // Log out by navigating back to the home page\r\n        const logout = () => this.props.navigate(\"/\");\r\n\r\n        return (\r\n            <div className=\"profile\">\r\n                <h3>Logged in as {this.state.displayName}</h3>\r\n\r\n                <p onClick={logout}>Logout</p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ProfilePage;"],"mappings":";AAAA,OAAO,mBAAmB;AAC1B,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,aAAa,MAAM,oBAAoB;AAC9C,SAASC,QAAQ,QAAQ,cAAc;AAAC;AAExC,MAAMC,WAAW,SAASH,KAAK,CAACI,SAAS,CAAC;EACtCC,WAAW,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG;MACTC,OAAO,EAAE,IAAIP,aAAa,EAAE;MAC5BQ,aAAa,EAAE,KAAK;MACpBC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE;IAChB,CAAC;EACL;EAEAC,iBAAiB,GAAG;IAChB,MAAMC,KAAK,GAAGX,QAAQ,EAAE;IACxB,IAAI,CAACK,KAAK,CAACC,OAAO,CAACM,cAAc,CAACD,KAAK,CAAC;;IAExC;IACA;IACA;;IAEA,IAAI,CAACN,KAAK,CAACC,OAAO,CAACO,KAAK,EAAE,CAACC,IAAI,CAACC,EAAE,IAAI,IAAI,CAACC,QAAQ,CAAC;MAACR,WAAW,EAAEO,EAAE,CAACE;IAAY,CAAC,CAAC,EAC/EC,KAAK,IAAIC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEF,KAAK,CAAC,CAAC;IAEhE,IAAI,CAACb,KAAK,CAACC,OAAO,CAACe,eAAe,CAAC;MAC/BC,KAAK,EAAE;IACX,CAAC,CAAC,CAACR,IAAI,CAACS,WAAW,IAAI;MACnB,IAAIC,OAAO,GAAG,EAAE;MAChBD,WAAW,CAACE,KAAK,CAACC,OAAO,CAACC,MAAM,IAAIH,OAAO,CAACI,IAAI,CAACD,MAAM,CAACE,IAAI,CAAC,CAAC;MAE9D,IAAI,CAACb,QAAQ,CAAC;QACVP,UAAU,EAAEe,OAAO;QACnBjB,aAAa,EAAE;MACnB,CAAC,CAAC;IACN,CAAC,EAAEW,KAAK,IAAIC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,KAAK,CAAC,CAAC;EAClE;EAEAY,MAAM,GAAG;IACL;IACA;IACA,IAAI,CAAC,IAAI,CAACzB,KAAK,CAACE,aAAa,EAAE,OAAO,IAAI;;IAE1C;IACA,MAAMwB,MAAM,GAAG,MAAM,IAAI,CAAC3B,KAAK,CAAC4B,QAAQ,CAAC,GAAG,CAAC;IAE7C,oBACI;MAAK,SAAS,EAAC,SAAS;MAAA,wBACpB;QAAA,4BAAkB,IAAI,CAAC3B,KAAK,CAACG,WAAW;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,eAE9C;QAAG,OAAO,EAAEuB,MAAO;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAW;IAAA;MAAA;MAAA;MAAA;IAAA,QAC5B;EAEd;AACJ;AAEA,eAAe9B,WAAW"},"metadata":{},"sourceType":"module"}